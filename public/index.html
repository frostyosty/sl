<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="robots" content="index, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Jacquard+24&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Jacquard+24&family=Parisienne&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Alegreya:wght@400;700&family=Lato:wght@400;700&family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
  <!-- newspaper title -->
  <link href="https://fonts.googleapis.com/css2?family=Fredericka+the+Great&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/styles.css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
  <title>END SUITERRY</title>
</head>

<body>



    <div class="header-container">

         
        <!-- option 1 -->
                    <!-- <div class="header-background-image"></div>
                    <canvas id="starfield"></canvas>
                    <div class="header-foreground-image"></div>
                    <div class="search-tabs-container"> -->
        
        
       
        
        
        <!-- searchbar optional -->
                      <!-- <div class="search-container">
        
                          <input type="text" id="searchBar" placeholder="Search...">
                          <button onclick="searchText()">Search</button>
                      </div> -->
        
        
                      <nav>
                        <div class="hamburger-menu" onclick="toggleMenu()">
                            <span class="bar first"></span>
                            <span class="bar second"></span>
                            <span class="bar third"></span>
                            <span class="bar fourth"></span>
                            <span class="bar fifth"></span>
                            <span class="bar sixth"></span>
                            <span class="bar seventh"></span>
                            <span class="bar eighth"></span>
                            <span class="bar ninth"></span>
                            <span class="bar tenth"></span>
                            <span class="bar eleventh"></span>
                            <span class="bar twelfth"></span>
                            <span class="bar thirteenth"></span>
                            <span class="bar fourteenth"></span>
                            <span class="bar fifthteenth"></span>
                            <span class="bar sixteenth"></span>
                            <span class="bar seventeenth"></span>
                            <span class="bar eighteenth"></span>
                            <span class="bar nineteenth"></span>
                            <span class="bar twentieth"></span>
                            <span class="bar twentyfirst"></span>
                            <span class="bar twentysecond"></span>
                        </div>
                        <div class="tabs">
                            <button class="tablinks active" onclick="openTab(event, 'bible')">The Swearer's Bible</button>
                            <button class="tablinks" onclick="openTab(event, 'sl')">End Sl</button>
                            <button class="tablinks" onclick="openTab(event, 'music')">Music</button>
                        </div>
                      </nav>
                  </div>
                </div>
        
                
            </header>
        


            


      <div class="wrapper">
        <div class="gutters left-gutter"></div>
  <!-- Container for tab contents -->

  
<div id="tabContentsContainer">
  

    <div id="sl" class="tabcontent">


<!-- <div class="csf-spinner">
  <div class="csf-letter">C</div>
  <div class="csf-letter">S</div>
  <div class="csf-letter">F</div>
</div>

<div id="es-spinner">
  <span>E</span>
  <span>S</span>
</div> -->
            

        <div class="header" id="fancyHeader">End S</Script:src></div>

        <div class="sl-container">
            <div class="sl-forms">

                      <!-- Search Form -->
                      <div class="sl-form-block">
                        <h2>Search</h2>
                        <br>
                        <div id="sl-searchResults">Is your S.O. chaste?</div>
                        <input type="text" id="sl-searchTerm" placeholder="Search for a name" />
                        <button id="sl-searchButton" class="sl-button">Search</button>
                        <div id="sl-searchResults">"Narking" involves authority. This is just shouting to the world - a globalised reimagining of the "chaperone" mechanism that kept your ancestors prosperous</div>
                      </div>


                <!-- Entry Form -->
                <div class="sl-form-block">
                  <h2>Add</h2>
                  <br>
                  <form id="sl-entryForm">
                    <div id="sl-message" class="sl-message"></div>
                    <input type="text" id="sl-name" placeholder="e.g. Helen Carpenter" required />
                    <textarea id="sl-description" placeholder="Offense description" required></textarea>
                
                    <div class="sl-date-row">
                      <label for="sl-approxDate">Approx. date of offense:</label>
                      <input type="date" id="sl-approxDate" name="approxDate" placeholder="Approx. date of offense" />
                      <button type="button" id="todayButton" class="sl-button">Today</button>
                      <button type="button" id="yesterdayButton" class="sl-button">Yesterday</button>
                    </div>
                
                    <div class="sl-options-row">
                      <div>
                        <label>Approx. Age:</label>
                        <input type="radio" id="age18" name="approxAge" value="18">
                        <label for="age18">18</label>
                        <input type="radio" id="age21" name="approxAge" value="21">
                        <label for="age21">21</label>
                        <input type="radio" id="age25" name="approxAge" value="25">
                        <label for="age25">25</label>
                      </div>
                
                      <div>
                        <label>Ethnicity of suit:</label>
                        <label><input type="radio" name="ethnicity" value="White" /> White</label>
                        <label><input type="radio" name="ethnicity" value="Black" /> Black</label>
                        <label><input type="radio" name="ethnicity" value="Asian" /> Asian</label>
                      </div>
                    </div>
                
                    <button id="sl-submitButton" class="sl-button" type="submit">Submit</button>
                  </form>
                </div>


              </div>

            <div id="sl-photoBlurb" class="sl-hidden">
              This feature is disabled until I can sort out converting pictures to text.
            </div>

            <h2>Recent Entries</h2>
            <table id="sl-recentEntriesTable" class="sl-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Approx Date</th>
                  <th>Approx Age</th>
                  <th>Ethnicity</th>
                  <th>Timestamp</th>
                  <th><span class="photo-question">Photo(?)</span></th>
                </tr>
              </thead>
              <tbody id="sl-recentEntriesList">
                <!-- Populated entries will go here -->
              </tbody>
            </table>
        </div>
        
        <div class="sl-container-alltable">
          <div class="sl-seeAll-block">
            <h2>See All</h2>
            <br>
            <button id="sl-loadAllButton" class="sl-button">Load All</button>
            <button id="sl-hideAllButton" class="sl-button sl-hidden">Hide</button>
            
            <table id="sl-allEntriesTable" class="sl-table sl-hidden">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Description</th>
                  <th>
                    <button id="sl-expandColumnsButton" class="sl-button">Expand Columns</button>
                  </th>
                  <th class="sl-hide-when-minified">Approx Date</th>
                  <th class="sl-hide-when-minified">Approx Age</th>
                  <th class="sl-hide-when-minified">Ethnicity</th>
                  <th class="sl-hide-when-minified">Created At</th>
                  <th class="sl-hide-when-minified">Photo</th>
                </tr>
              </thead>
              <tbody id="sl-allEntriesList">
                <!-- All entries will be loaded here -->
              </tbody>
            </table>
          </div>
        </div>
        

    </div>
     <script src="index.js"></script>


  
    <div id="bible" class="tabcontent">
        <div class="header" id="fancyHeader">TEMP TRANS TABLE</div>



                <div id="entry-table-container">
                  <div class="header fancyHeader" id="fancyHeaderEntries">Successful Entries</div>
                  <table id="entry-table" class="block">
                      <thead>
                          <tr>
                              <th>I swapped...</th>
                              <th>...for...</th>
                              <th>...on...</th>
                              <th>...in...</th>
                          </tr>
                      </thead>
                      <tbody id="entry-table-body">
                          <!-- table rows injected here -->
                      </tbody>
                  </table>
              
                  <div id="entry-side-by-side-container">
                      <!-- filters Section -->
                      <div id="entry-filters" class="block">

                        <div id="entry-filters-wrapper">
                        <!-- <div class="header fancyHeader">Filter</div> --muted as not really needed -->
                          <form id="entry-filters-form">

                              <div class="entries-filters-row">
<!--                                   <label>Time Range:</label> -->
                                  <div>
                                    <input type="radio" id="filter-any" name="time-range" value="all" checked>
                                    <label for="filter-any">Any</label>
                                    <input type="radio" id="filter-this-week" name="time-range" value="week">
                                    <label for="filter-this-week">This Week</label>
                                    <input type="radio" id="filter-this-month" name="time-range" value="month">
                                    <label for="filter-this-month">This Month</label>
                                    <input type="radio" id="filter-this-year" name="time-range" value="year">
                                    <label for="filter-this-year">This Year</label>
                                  </div>
<!--                               </div>
                              <div class="entries-filters-row"> -->
<!--                                   <label for="filter-location">Location:</label> -->
                                  <div class="toggle-switch">
                                      <input type="checkbox" name="filter-location-toggle" id="filter-location-toggle" checked>
                                      <label for="filter-location-toggle">Global</label>
                                  </div>
                                  <input type="text" id="local-location" placeholder="Enter location" style="display: none;">
                              </div>
                              <div class="entries-filters-row">
                                  <!-- <label for="filter-item">Filter:</label> -->
                                  <input list="item-list" id="filter-item" placeholder="Type or select an item to filter for">
                                  <datalist id="item-list"></datalist>
                              </div>
                              <!-- APPLY FILTER BUTTON IF NEEDED IN THE FUTURE -->
                              <!-- <button type="submit" id="apply-filter-submit" class="button-style-3-purple-v2 button-general-formatting">Apply Filters</button> -->
                          </form>


                          <div id="stats-section" class="stats-section-container" style="display: none;">
                            <!-- desirability -->
                            <div class="stats-item">
                                <div class="stats-title">Desirability</div>
                                <div class="stats-value" id="stats-desirability">0</div>
                                <div class="stats-toggle" onclick="toggleDropdown('desirability-desc')">&#9660;</div>
                                <div class="stats-description stats-section-slide-down" id="desirability-desc">
                                    The desirability score reflects how many items are normally swapped for the item.
                                    This is helpful because if an item often fetches multiple items when swapped, it means it is more likely to be the item that is highly desired. Conversely if the item is normally bundled with other items when swapped, it is unlikely to be the focal point of the swap.
                                </div>
                            </div>
                        
                            <!-- rarity -->
                            <div class="stats-item">
                                <div class="stats-title">Rarity</div>
                                <div class="stats-value" id="stats-rarity">0</div>
                                <div class="stats-toggle" onclick="toggleDropdown('rarity-desc')">&#9660;</div>
                                <div class="stats-description stats-section-slide-down" id="rarity-desc">
                                    The rarity score reflects how many entries have had an instance of this item in them.
                                    This is helpful because if an item is not normally traded, it may be an opportunity to acquire something unusual.
                                </div>
                            </div>
                        
                            <!-- diversity -->
                            <div class="stats-item">
                                <div class="stats-title">Diversity</div>
                                <div class="stats-value" id="stats-diversity">0</div>
                                <div class="stats-toggle" onclick="toggleDropdown('diversity-desc')">&#9660;</div>
                                <div class="stats-description stats-section-slide-down" id="diversity-desc">
                                    Diversity represents the variety of IP addresses associated with the item. High diversity indicates a flexibility of sorts - the more parties interested in certain items, the more "dynamic" the "flow" of the item is.
                                </div>
                            </div>


                              <!-- ratios -->
                              <div class="stats-item">
                                <div class="stats-title">Item Ratios</div>
                                <div class="stats-value" id="stats-ratios">0</div>
                                <div class="stats-toggle" onclick="toggleDropdown('ratios-desc')">&#9660;</div>
                                <div class="stats-description stats-section-slide-down" id="ratios-desc">
                                    These ratios show how much of this item is normally traded for other items. This functionality will be operational once the database gets larger, as quite a number of occurences will be needed for these 'ratios' to be useful.
                                </div>
                            </div>

<!-- implement later - seasonality - will need to do css js etc -->
                            <!-- <div class="stats-item">
                              <div class="stats-title">Seasonality</div>
                              <div class="stats-value" id="stats-seasonality">0</div>
                              <div class="stats-toggle" onclick="toggleDropdown('seasonality-desc')">&#9660;</div>
                              <div class="stats-description stats-section-slide-down" id="seasonality-desc">
                                  Seasonality can be implemented to help users understand if there are "seasons" for this item. As a random example, rakes might be swapped biannually, when the leaves fall and when the soil needs tilling.
                               </div>
                          </div> -->

                        </div>
                        <!-- below is closing div for form wrapper (for grey lines css) -->
                      </div>
                    </div>
                  </div>
  
<!--   closing entries div -->
                </div>
      
<!-- closing bible container div -->
            </div>


  

<div id="csf-comment-section">
  <div id="csf-comment-section-form">
    <textarea id="csf-comment-section-text" placeholder="Write a comment..." required></textarea>
    <button id="csf-comment-section-submit">Submit Comment</button>
  </div>
  <div id="csf-comment-section-comments"></div>
</div>







    </div><!-- closing tab contents container-->
  <div class="gutters right-gutter"></div>
</div><!-- closing wrapper container-->






















<script>





// question mark
document.getElementById('questionmark-icon').addEventListener('click', function() {
  const blurb = document.getElementById('blurb');
  const isExpanded = blurb.style.maxHeight;
  if (isExpanded) {
    blurb.style.maxHeight = null;
    blurb.classList.remove('blurb-expanded');
  } else {
    blurb.style.maxHeight = blurb.scrollHeight + "px";
    blurb.classList.add('blurb-expanded');
  }
});
//document.getElementById('justification-btn').addEventListener('click', function() {
//  openPDFViewer('pdfs/biblebooks/foreword.pdf'); 
//});





















// Load comments when the document is ready
document.addEventListener('DOMContentLoaded', () => {
  loadComments();

  // set up MutationObserver to watch for new comments
  const commentsContainer = document.getElementById('csf-comment-section-comments');
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      mutation.addedNodes.forEach((node) => {
        if (node.nodeType === Node.ELEMENT_NODE && node.parentNode) {
          // select node here or handle other logic

          // any extra logic needed to handle newly added nodes
        }
      });
    });
  });

  observer.observe(commentsContainer, { childList: true });
});

// Submit a new comment
document.getElementById('csf-comment-section-submit').addEventListener('click', async () => {
  const commentText = document.getElementById('csf-comment-section-text').value.trim();
  if (!commentText) return alert('Comment cannot be empty.');

  const userIp = await getUserIp();
  const newComment = {
    comment_text: commentText,
    user_ip: userIp,
    user_hex_color: '#000000', // default for optimistic render
    depth: 0,
    likes: 0,
    dislikes: 0
  };

  renderComment(newComment, true); // Render comment optimistically

  // Submit to the server
  const response = await fetch('/api/csf-comment-section', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ commentText, userIp })
  });

  if (response.ok) {
    loadComments(); // Reload all comments if successfully submitted
  } else {
    const result = await response.json();
    alert(result.message); // Rate limit or error messages
  }
});
// Load and render the five most recent comments
async function loadComments() {
  const res = await fetch('/api/csf-comment-section'); // Only fetches top-level comments
  const comments = await res.json();
  const commentsContainer = document.getElementById('csf-comment-section-comments');
  commentsContainer.innerHTML = ''; // Clear previous comments

  comments.forEach(comment => {
    // Check if user_ip is present and log for debugging
    console.log("Processing comment:", comment);

    if (comment.user_ip) {
      // Generate guest name from user IP
      comment.user_name = generateGuestName(comment.user_ip);
      console.log("Generated name:", comment.user_name); // Log generated name
    } else {
      // Fallback if user_ip is missing
      comment.user_name = "Guest";
      console.warn("No user IP found, using default name:", comment.user_name);
    }

    renderComment(comment);
  });
}

// Render a single comment
function renderComment(comment, isOptimistic = false) {
  const commentElem = document.createElement('div');
  commentElem.className = 'csf-comment';
  commentElem.id = `comment-${isOptimistic ? 'temp' : comment.id}`;
  commentElem.innerHTML = `
    <div class="csf-comment-header">
      <div class="csf-comment-icon" style="background-color: ${comment.user_hex_color}"></div>
      <span>${comment.user_name}</span>
    </div>
    <div class="csf-comment-body">${comment.comment_text}</div>
    <div class="csf-comment-footer">
      <button onclick="likeComment(${comment.id})">üëç ${comment.likes}</button>
      <button onclick="dislikeComment(${comment.id})">üëé ${comment.dislikes}</button>
    </div>
  `;
  document.getElementById('csf-comment-section-comments').appendChild(commentElem);
}


// Like a comment
async function likeComment(id) {
  await fetch('/api/csf-comment-section', {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id, action: 'like' })
  });
  loadComments();
}

// Dislike a comment
async function dislikeComment(id) {
  await fetch('/api/csf-comment-section', {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id, action: 'dislike' })
  });
  loadComments();
}

// Fetch user's IP
async function getUserIp() {
  const response = await fetch('/api/get-ip');
  const { ip } = await response.json();
  return ip;
}

// refresh every 30 seconds
document.addEventListener('DOMContentLoaded', () => {
  loadComments(); // Initial load
  setInterval(loadComments, 30000); // Reload every 15 seconds
});


// name generator


// Function to convert IP to a unique, pronounceable guest name
function generateGuestName(ip) {
  // Split the IP into segments and process each number
  const segments = ip.split('.').map(Number);
  let processed = segments.map(num => Math.floor(num / 3)).reverse();

  // Character sets for consonants and vowels
  const consonants = 'bcdfghjklmnpqrstvwxyz';
  const vowels = 'aeiou';

  // Build the name by alternating consonants and vowels
  let name = '';
  processed.forEach((num, index) => {
    if (name.length >= 9) return; // Stop if the name reaches max length
    if (index % 2 === 0) {
      name += consonants[num % consonants.length];
    } else {
      name += vowels[num % vowels.length];
    }
  });

  return `Guest name: ${name}`;
}

















//End suittery

// fetch('/api/test-connection')
//   .then(response => response.json())
//   .then(data => console.log(data))
//   .catch(error => console.error('Error fetching test connection:', error));
// // Fetch recent entries when the page loads
// document.addEventListener('DOMContentLoaded', fetchRecentEntries);



// async function fetchRecentEntries() {
//   try {
//     const response = await fetch('/api/recent');

//     // Log if the response is not OK
//     if (!response.ok) {
//       console.error(`Server error: ${response.status} - ${response.statusText}`);
//       throw new Error(`Server error: ${response.status}`);
//     }

//     const entries = await response.json();
//     console.log('Raw response from API:', entries);  // Log the raw response
    
//     // Check if entries is an array
//     if (!Array.isArray(entries)) {
//       throw new Error('Expected an array but received: ' + JSON.stringify(entries));
//     }

//     updateEntriesTable(entries);  // Call the function to update the table
//   } catch (error) {
//     console.error('Error fetching recent entries:', error);
//   }
// }

// // refresh every 30 seconds
// document.addEventListener('DOMContentLoaded', () => {
//   fetchRecentEntries(); // Initial load
//   setInterval(fetchRecentEntries, 30000); // Reload every 15 seconds
// });

// // Unified function to update the table with entries (recent entries or search results)
// function updateEntriesTable(entries, append = false) {
//   const tableBody = document.getElementById('sl-recentEntriesList');
  
//   // Clear table if not appending (e.g., for search results)
//   if (!append) {
//     tableBody.innerHTML = ''; 
//   }

//   entries.forEach(entry => {
//     const row = document.createElement('tr');
//     const nameCell = document.createElement('td');
//     nameCell.textContent = entry.name || '-';  // Default to '-' if name is missing
//     row.appendChild(nameCell);
//     const descriptionCell = document.createElement('td');
//     descriptionCell.textContent = entry.description || '-';  // Default to '-' if description is missing
//     row.appendChild(descriptionCell);
//     const approxDateCell = document.createElement('td');
//     approxDateCell.textContent = entry.approx_date || '-';  // Default to '-' if approx_date is missing
//     row.appendChild(approxDateCell);
//     const approxAgeCell = document.createElement('td');
//     approxAgeCell.textContent = entry.approx_age || '-';  // Default to '-' if approx_age is missing
//     row.appendChild(approxAgeCell);
//     const ethnicityCell = document.createElement('td');
//     ethnicityCell.textContent = entry.ethnicity || '-';  // Default to '-' if ethnicity is missing
//     row.appendChild(ethnicityCell);
//     const timestampCell = document.createElement('td');
//     const timestamp = entry.timestamp ? new Date(entry.timestamp).toLocaleDateString() : '-';  // Handle missing timestamp
//     timestampCell.textContent = timestamp;
//     row.appendChild(timestampCell);
//     const evidenceCell = document.createElement('td');
//     evidenceCell.textContent = 'None submitted';  // Static text
//     const infoIcon = document.createElement('span');
//     infoIcon.textContent = ' ';
//     infoIcon.title = "This feature is not currently enabled as it's hard to stop inappropriate content.";
//     evidenceCell.appendChild(infoIcon);
//     row.appendChild(evidenceCell);
//     if (append) {
//       tableBody.insertBefore(row, tableBody.firstChild); // Insert at top if appending
//     } else {
//       tableBody.appendChild(row);
//     }
//   });
// }








// // Track last submission time
// let lastSubmissionTime = 0;

// // Setting approxDate to today's date
// const todayButton = document.getElementById('todayButton');
// if (todayButton) {
//   todayButton.addEventListener('click', function () {
//     const today = new Date().toISOString().split('T')[0];
//     document.getElementById('sl-approxDate').value = today;
//   });
// }


// // Setting approxDate to yesterday's date
// const yesterdayButton = document.getElementById('yesterdayButton');
// if (yesterdayButton) {
//   yesterdayButton.addEventListener('click', function () {
//     const yesterday = new Date(Date.now() - 864e5).toISOString().split('T')[0];
//     document.getElementById('sl-approxDate').value = yesterday;
//   });
// }


// // Handle form submission with a 10-second submission restriction
// document.getElementById('sl-entryForm').addEventListener('submit', async (event) => {
//   const firstnamelastnamecheck = document.getElementById('sl-name').value.trim() || '-';

//   if (!firstnamelastnamecheck.includes(' ')) {
//     alert('Please enter both a first and last name.');
//     return;
//   }

//     const now = Date.now();
//   if (now - lastSubmissionTime < 10000) { // 10 seconds restriction
//     alert('Please wait at least 10 seconds between submissions.');
//     return;
//   }

//   lastSubmissionTime = now; // Update last submission time
//   // Get form values
//   const name = document.getElementById('sl-name').value.trim() || '-';
//   const description = document.getElementById('sl-description').value.trim() || '-';
//   const approxDate = document.getElementById('sl-approxDate').value || '-';
//   const approxAge = document.querySelector('input[name="approxAge"]:checked')?.value || '-';
//   const ethnicity = document.querySelector('input[name="ethnicity"]:checked')?.value || '-'; // Ethnicity is optional
//   const submitButton = document.getElementById('sl-submitButton');
//   const messageContainer = document.getElementById('sl-message');

//   // Create current timestamp
//   const timestamp = new Date().toISOString();

//   if (name && description) {
//     submitButton.textContent = 'Loading...';
//     messageContainer.textContent = '';
//             try {
//           const response = await fetch('/api/submit', {
//             method: 'POST',
//             headers: { 'Content-Type': 'application/json' },
//             body: JSON.stringify({
//               name,
//               description,
//               approxDate,
//               approxAge,
//               ethnicity
//             }),
//           });

//           if (!response.ok) {
//             const errorText = await response.text();
//             throw new Error(`Server error: ${errorText}`);
//           }

//           const result = await response.json();
//           messageContainer.textContent = result.message;
//           messageContainer.className = 'sl-success';
//           console.log('Submit response:', result);

//           // Successful submission --> add the new entry at the top of the table
//           addRecentEntryToList(name, description, approxDate, approxAge, ethnicity, timestamp);

//         } catch (error) {
//           console.error('Error submitting entry:', error);
//           messageContainer.textContent = error.message;
//           messageContainer.className = 'sl-error';

//         } finally {
//           submitButton.textContent = 'Submit'; // Reset button text
//         }

//   } else {
//     messageContainer.textContent = 'Name and description are required.';
//     messageContainer.className = 'sl-error';
//   }
// });





// // Add a new entry to the top of the recent entries list
// function addRecentEntryToList(name, description, approxDate, approxAge, ethnicity, timestamp) {
//   const table = document.getElementById('sl-recentEntriesTable').querySelector('tbody');
//   const row = document.createElement('tr');

//   row.innerHTML = `
//     <td data-label="Name">${name}</td>
//     <td data-label="Description">${description}</td>
//     <td data-label="Approx. Date">${approxDate || '-'}</td>
//     <td data-label="Approx. Age">${approxAge || '-'}</td>
//     <td data-label="Ethnicity">${ethnicity || '-'}</td>
//     <td data-label="Timestamp">${timestamp}</td>
//     <td data-label="Photo(?)"><span class="photo-question">?</span></td>
//   `;
//   table.prepend(row);
// }
// // Setting today's date
// document.getElementById('todayButton').addEventListener('click', function () {
//   const today = new Date().toISOString().split('T')[0];
//   document.getElementById('date').value = today;
// });

// // Setting yesterday's date
// document.getElementById('yesterdayButton').addEventListener('click', function () {
//   const yesterday = new Date(Date.now() - 864e5).toISOString().split('T')[0];
//   document.getElementById('date').value = yesterday;
// });
// // sorting entries 
// document.querySelectorAll('.sortable').forEach(header => {
//   header.addEventListener('click', () => {
//     const tableBody = document.getElementById('sl-recentEntriesList');
//     const rows = Array.from(tableBody.querySelectorAll('tr'));
//     const column = header.getAttribute('data-column');
//     const ascending = header.getAttribute('data-ascending') === 'true';

//     rows.sort((a, b) => {
//       const cellA = a.querySelector(`td[data-label="${column}"]`).textContent.trim();
//       const cellB = b.querySelector(`td[data-label="${column}"]`).textContent.trim();
      
//       return ascending ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
//     });
    
//     tableBody.innerHTML = ''; // clear current rows
//     rows.forEach(row => tableBody.appendChild(row)); // append sorted rows

//     header.setAttribute('data-ascending', !ascending); // toggle direction
//   });
// });






// // Handle search functionality
// document.getElementById('sl-searchButton').addEventListener('click', async () => {
//   const searchTerm = document.getElementById('sl-searchTerm').value;
//   console.log('Search initiated for:', searchTerm);
//   const searchButton = document.getElementById('sl-searchButton');
//   const messageContainer = document.getElementById('sl-message');

//   searchButton.textContent = 'Searching...';
//   messageContainer.textContent = '';

//   try {
//     const response = await fetch(`/api/search?searchTerm=${encodeURIComponent(searchTerm)}`);
//     const searchResults = await response.json();

//     if (searchResults.length > 0) {
//       updateEntriesTable(searchResults); // Use the same table for search results
//     } else {
//       messageContainer.textContent = 'No results found';
//     }
//   } catch (error) {
//     console.error('Error fetching search results:', error);
//     messageContainer.textContent = error.message;
//     messageContainer.className = 'sl-error';
//   } finally {
//     searchButton.textContent = 'Search';
//   }
// });

// // photo notification

// document.getElementById('sl-recentEntriesTable').addEventListener('click', (event) => {
//   if (event.target.classList.contains('photo-question')) {
//     const blurb = document.getElementById('sl-photoBlurb');
//     if (blurb.classList.contains('sl-hidden')) {
//       blurb.classList.remove('sl-hidden');
//       blurb.classList.add('sl-visible');
//     } else {
//       blurb.classList.remove('sl-visible');
//       blurb.classList.add('sl-hidden');
//     }
//   }
// });





// //alltable all table
// document.getElementById('sl-loadAllButton').addEventListener('click', async () => {
//   console.log('Load All button clicked');
//   const allTable = document.getElementById('sl-allEntriesTable');
//   const allTableBody = document.getElementById('sl-allEntriesList');
//   const hideButton = document.getElementById('sl-hideAllButton');
  
//   try {
//     const response = await fetch('/api/all');
//     console.log('Fetching data from /api/all');
    
//     if (!response.ok) {
//       console.error(`Error fetching data: ${response.status} ${response.statusText}`);
//       throw new Error(`Status Code: ${response.status}`);
//     }

//     const data = await response.json();

//     // Populate table with initial columns
//     allTableBody.innerHTML = ''; // Clear any existing data
//     data.forEach(entry => {
//       const row = document.createElement('tr');
//       row.innerHTML = `
//         <td>${entry.name || '-'}</td>
//         <td>${entry.description || '-'}</td>
//         <td>${new Date(entry.created_at).toLocaleDateString() || '-'}</td>
//         <td class="sl-hide-when-minified">${entry.approx_date || '-'}</td>
//         <td class="sl-hide-when-minified">${entry.approx_age || '-'}</td>
//         <td class="sl-hide-when-minified">${entry.ethnicity || '-'}</td>
//         <td class="sl-hide-when-minified">${entry.photo || '-'}</td>
//         <td class="sl-hide-when-minified">${entry.created_at ? new Date(entry.created_at).toLocaleDateString() : '-'}</td>
//       `;
//       allTableBody.appendChild(row);
//     });

//     // Show table and toggle button visibility
//     allTable.classList.remove('sl-hidden'); // remove hidden class from table
//     hideButton.classList.remove('sl-hidden'); // show the hide button
//     document.getElementById('sl-loadAllButton').classList.add('sl-hidden'); // hide load button
//   } catch (error) {
//     console.error('Error loading all entries:', error);
//   }
// });

// // Hide button behavior
// document.getElementById('sl-hideAllButton').addEventListener('click', () => {
//   document.getElementById('sl-allEntriesTable').classList.add('sl-hidden');
//   document.getElementById('sl-hideAllButton').classList.add('sl-hidden');
//   document.getElementById('sl-loadAllButton').classList.remove('sl-hidden');
// });

// document.getElementById('sl-expandColumnsButton').addEventListener('click', () => {
//   const expandButton = document.getElementById('sl-expandColumnsButton');
//   const extraColumns = document.querySelectorAll('.sl-hide-when-minified');
//   const isExpanded = expandButton.textContent === 'Minify';

//   // Toggle extra columns' visibility
//   extraColumns.forEach(column => {
//     column.style.display = isExpanded ? 'none' : 'table-cell';
//   });

//   // Adjust button text
//   expandButton.textContent = isExpanded ? 'Expand Columns' : 'Minify';
// });
















// // form submission with "Enter" key
// document.getElementById('sl-entryForm').addEventListener('keydown', function(event) {
//   if (event.key === 'Enter') {
//     event.preventDefault();  // stop form from auto-submitting
//     document.getElementById('sl-submitButton').click();
//   }
// });

// //search functionality with "Enter" key
// document.getElementById('sl-searchTerm').addEventListener('keydown', function(event) {
//   if (event.key === 'Enter') {
//     event.preventDefault();
//     document.getElementById('sl-searchButton').click();
//   }
// });















// log deployment count personal for working within deployment-limiting environs
//today's date in UTC for timezone consistency
function getUTCDate() {
    const now = new Date();
    return new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()));
}
function logDeploymentCount() {
    try {
        let deploymentCount = localStorage.getItem('deploymentCount');
        let storedDate = localStorage.getItem('deploymentDate');
        let currentDate = getUTCDate();

        if (!storedDate || new Date(storedDate) < currentDate) {
            deploymentCount = 0;
            localStorage.setItem('deploymentDate', currentDate.toISOString());
        }

        deploymentCount++;
        localStorage.setItem('deploymentCount', deploymentCount);

        console.log(`Iterations deployed today: ${deploymentCount}`);
    } catch (error) {
        console.error('Error occurred while logging deployment count:', error);
    }
}
logDeploymentCount();






































































  //tabs
 document.addEventListener('DOMContentLoaded', function() {
  //open the first tab on page load
  document.getElementsByClassName('tablinks')[0].click();
});
function openTab(evt, tabName) {
  var container = document.getElementById('tabContentsContainer');
  var clickedTabContent = document.getElementById(tabName);
  //clicked tab content to the top of the container
  container.insertBefore(clickedTabContent, container.firstChild);
  var tablinks = document.querySelectorAll('.tablinks');
  tablinks.forEach(function(tablink) {
    tablink.classList.remove('active');
  });
  evt.currentTarget.classList.add('active');
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}


//hamburger
function toggleMenu() {
  var menu = document.querySelector('.tabs');
  var hamburger = document.querySelector('.hamburger-menu');
  hamburger.classList.toggle('open');
  if (hamburger.classList.contains('open')) {
    menu.style.display = 'flex';
    document.addEventListener('click', closeMenuOnClickOutside);
  } else {
    menu.style.display = 'none';
    document.removeEventListener('click', closeMenuOnClickOutside);
  }
}
function closeMenuOnClickOutside(event) {
  var menu = document.querySelector('.tabs');
  var hamburger = document.querySelector('.hamburger-menu');
  if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
    menu.style.display = 'none';
    hamburger.classList.remove('open');
    document.removeEventListener('click', closeMenuOnClickOutside);
  }
}
























//scrolling gutters
console.log("Script loaded correctly");

window.addEventListener('scroll', function() {
    var scrollPosition = window.pageYOffset;
  
    var parallaxElements = document.querySelectorAll('.parallax');
    
    parallaxElements.forEach(function(el) {
        var speed = el.getAttribute('data-speed') || 0.5;
        var offset = scrollPosition * speed;
        
        // the offset
        console.log(`Offset applied to element with speed ${speed}: ${offset}`);
        
        el.style.transform = `translateY(${offset}px)`;
    });
});

</script>


<!-- <div class="copy-container">
  <p>Please feel free to grab any/all aspects of this webpage for personal or commercial use</p>
  <div class="copy-button" onclick="copyToClipboard('html')">
    <img src="public/pictures/icons/folder-icon.png" alt="Copy HTML to Clipboard">
    <span>Copy HTML to Clipboard</span>
  </div>
  <div class="copy-button" onclick="copyToClipboard('css')">
    <img src="public/pictures/icons/folder-icon.png" alt="Copy CSS to Clipboard">
    <span>Copy CSS to Clipboard</span>
  </div>
  <div class="popup-message" id="popupMessage">Successfully copied to clipboard!</div>
</div>
<textarea id="htmlContent" style="display:none;"> -->
  <!-- entire HTML content here -->
<!-- </textarea>
<textarea id="cssContent" style="display:none;"> -->
 <!--entire CSS content here-->
<!-- </textarea> -->


  <footer>
 
    <p>No rights reserved &copy;</p>
  </footer>

</body>
